<section class="">
    <div class="container d-flex justify-content-center">
      <div class="row w-75 mt-5">
        <div class="col-md-12">
          <h2 class="text-center">Product List</h2>
          <form
            
            method="POST"
            enctype="multipart/form-data"
          >
            
          </form>
        </div>
      </div>
    </div>
  </section>
  <li class="menu-item has-submenu" style="list-style-type: none;     margin-left: 60rem;">
    <button type="button" class="btn btn-success"><a class="" href="/admin/add-product">
      <!-- <i class="icon material-icons md-add_box"></i> -->

      <span class="textt" style="color:#f3e8e8" margin-right="30cm" list-style="none">Add Product</span>
    </a></button>
    
  </li>
  <!-- Table section -->
  <section  mx-auto>
    <div class="card-body">
      <div class="row mt-5 mx-auto">
        <div class="table-responsive">
          <div class="table-responsive">
            <table class="table align-middle table-nowrap mb-0" id="myTable">
              <thead class="table-light">
                <tr>
                  <th class="align-middle" scope="col">No:</th>
                  <th class="align-middle" scope="col">Image</th>
                  <th class="align-middle" scope="col">product Name</th>
                  <th class="align-middle" scope="col">Category</th>
                  <th class="align-middle" scope="col">price</th>
                  <!-- <th class="align-middle" scope="col">Category</th> -->
                  <th class="align-middle" scope="col">Quantity</th>
                 
                  <th class="align-middle" scope="col">option</th>
                </tr>
              </thead>
              <tbody>
                <% response.forEach(function(response,index) { %>
                <tr>
                  <td><%=index+1 %> </td>
                  <td><img src='/images/products/<%= response.Image[0]%>' alt="" style="width:50px;height:50px";></td>
                  <td>
                    <p><%=response.Productname%></p>
                    <small><%=response.ProductDescription%></small>

                  </td> 
                  <td><%=response.category%></td> 
                  <td>â‚¹<%=response.Price%></td> 
                  <!-- <td><%=response.category%></td>  -->
                  <td><%=response.Quantity%></td> 
                
                  
                  <td>
                        <a href ="/admin/edit-product/<%=response._id %>"  class="btn btn-success">Edit</a>
                 
                        <!-- <a href="/admin/delete-product/" class="btn btn-danger" id="delete-btn">Delete</a> -->
                        <a class="btn btn-danger" alt="Delete" href="/admin/delete-product/<%=response._id %>" onclick="confirmDelete(event)"
                          ><i class="ri-delete-bin-6-line"></i></a>

                        
                  </td>
    
                 
                </tr>
          <% }) %>
              </tbody>
            </table>
          </div>
        </div>
        <!-- table-responsive end// -->
      </div>
    </div>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
<script>
  function confirmDelete(event) {
    event.preventDefault();
    Swal.fire({
      title: 'Are you sure?',
      text: "Do you want to delete the Product ",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#d33',
      cancelButtonColor: '#3085d6',
      confirmButtonText: 'Yes, delete it!'
    }).then((result) => {
      if (result.isConfirmed) {
        // If user confirms deletion, proceed with the delete request
        window.location.href = event.target.href;
      }
    })
  }

  document.addEventListener("DOMContentLoaded", function() {
    // select all delete buttons
    var deleteButtons = document.querySelectorAll('.delete-btn');
  
    // loop through the delete buttons and add event listeners
    deleteButtons.forEach(function(button) {
      button.addEventListener('click', confirmDelete);
    });
  });
</script>
